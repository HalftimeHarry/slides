import{ClassName as t,PointNdTextController as e,createPlugin as s,TpError as n,ValueMap as i,createNumberTextPropsObject as r,parseNumber as a,createRangeConstraint as o,createStepConstraint as l,CompositeConstraint as p,parseRecord as c}from"@tweakpane/core";class v{constructor(t,e){this.step=t,this.edge=e}constrain(t){var e,s;return null!==(s=null===(e=this.edge)||void 0===e?void 0:e.constrain(t))&&void 0!==s?s:t}}class u{constructor(t){this.val=t}static isObject(t){if("object"!=typeof t||null===t)return!1;return"number"==typeof t.val}static equals(t,e){return t.val===e.val}toObject(){return{val:this.val}}}const d={fromComponents:t=>t[0],toComponents:t=>[t]},h=t("step");class b{constructor(t,e){this.buttonsView_=e.buttonsView,this.textView_=e.textView,this.element=t.createElement("div"),this.element.classList.add(h());const s=t.createElement("div");s.classList.add(h("s")),s.appendChild(this.buttonsView_.element),this.element.appendChild(s);const n=t.createElement("div");n.classList.add(h("t")),n.appendChild(this.textView_.element),this.element.appendChild(n)}}const w=t("step");class m{constructor(t,e){this.element=t.createElement("div"),this.element.classList.add(w()),e.viewProps.bindClassModifiers(this.element);const s=t.createElement("button");s.textContent="-",s.classList.add(w("b")),e.viewProps.bindDisabled(s),this.element.appendChild(s),this.btnMinus=s;const n=t.createElement("button");n.textContent="+",n.classList.add(w("b")),e.viewProps.bindDisabled(n),this.element.appendChild(n),this.btnPlus=n}}class g{constructor(t,e){this.value=e.value,this.viewProps=e.viewProps,this.step=e.constraint?e.constraint.step:1,this.view=new m(t,{value:this.value,viewProps:e.viewProps}),this.view.btnMinus.addEventListener("click",(()=>{var t;const e=null!==(t=this.value.rawValue)&&void 0!==t?t:0;this.value.setRawValue(e-this.step,{forceEmit:!0,last:!0})})),this.view.btnPlus.addEventListener("click",(()=>{var t;const e=null!==(t=this.value.rawValue)&&void 0!==t?t:0;this.value.setRawValue(e+this.step,{forceEmit:!0,last:!0})}))}}class f{constructor(t,s){this.value=s.value,this.viewProps=s.viewProps,this.sc_=new g(t,s);const n={constraint:s.constraint.edge,textProps:s.textProps};this.tc_=new e(t,{assembly:d,axes:[n],parser:s.parser,value:this.value,viewProps:s.viewProps}),this.view=new b(t,{buttonsView:this.sc_.view,textView:this.tc_.view})}get textController(){return this.tc_}}const x="inputs",P=".tp-stepv,.tp-stepv_b{-webkit-appearance:none;-moz-appearance:none;appearance:none;background-color:rgba(0,0,0,0);border-width:0;font-family:inherit;font-size:inherit;font-weight:inherit;margin:0;outline:none;padding:0}.tp-stepv_b{background-color:var(--btn-bg);border-radius:var(--bld-br);color:var(--btn-fg);cursor:pointer;display:block;font-weight:bold;height:var(--cnt-usz);line-height:var(--cnt-usz);overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.tp-stepv_b:hover{background-color:var(--btn-bg-h)}.tp-stepv_b:focus{background-color:var(--btn-bg-f)}.tp-stepv_b:active{background-color:var(--btn-bg-a)}.tp-stepv_b:disabled{opacity:.5}.tp-stepv{background-color:var(--in-bg);border-radius:var(--bld-br);box-sizing:border-box;color:var(--in-fg);font-family:inherit;height:var(--cnt-usz);line-height:var(--cnt-usz);min-width:0;width:100%}.tp-stepv:hover{background-color:var(--in-bg-h)}.tp-stepv:focus{background-color:var(--in-bg-f)}.tp-stepv:active{background-color:var(--in-bg-a)}.tp-stepv:disabled{opacity:.5}.tp-stepv{display:flex;gap:var(--cnt-hp);background:none}.tp-stepv:hover,.tp-stepv:active{background:none}.tp-stepv_t{flex:1}.tp-stepv.tp-v-disabled{opacity:.5}.tp-stepv_b{position:relative;width:var(--cnt-usz)}",_=[s({id:"input-stepper",type:"input",accept:(t,e)=>{if("number"!=typeof t)return null;const s=c(e,(t=>{var e;return{view:t.required.constant("stepper"),max:t.optional.number,min:t.optional.number,step:null!==(e=t.optional.number)&&void 0!==e?e:1}}));return s?{initialValue:t,params:s}:null},binding:{reader:t=>t=>"number"==typeof t?t:0,writer:t=>(t,e)=>{t.write(e)},constraint(t){const e=[],s=o(t.params);s&&e.push(s);const n=l(t.params);return n&&e.push(n),new v(t.params.step?t.params.step:1,new p(e))}},controller(t){const e=t.value,s=t.constraint;if(!(s instanceof v))throw n.shouldNeverHappen();const o=i.fromObject(r(t.params,e.rawValue));return new f(t.document,{constraint:s,parser:a,textProps:o,value:e,viewProps:t.viewProps})}})];export{u as Stepper,d as StepperAssembly,g as StepperButtonsController,m as StepperButtonsView,f as StepperTextController,b as StepperTextView,P as css,x as id,_ as plugins};
